import{l as y,t as l,e as D,i as f,d as E}from"./index-d432a4bf.js";import{B as M}from"./index-242e481e.js";function U(O,v={}){const{icon:d,opacity:g,zIndexOffset:h,draggable:s,factory:p,dispose:x,updateSources:_=[],defIcon:w=new y.Icon.Default,...b}=v,a=l(O),o=l(d),r=l(g),c=l(h),u=l(s),i=D(k,{watch:a,updateSources:z(_),dispose:x});function k(){return p?p(a.value,I()):new y.Marker(a.value,I())}function I(){const n={...b};return f(o)&&(n.icon=o.value),f(r)&&(n.opacity=r.value),f(c)&&(n.zIndexOffset=c.value),f(u)&&(n.draggable=u.value),n}function z(n){return n.push({watch:a,handler:(t,e)=>{e!=null&&t.setLatLng(e)}}),d!=null&&n.push({watch:o,handler:(t,e)=>{e?t.setIcon(e):w&&t.setIcon(w)}}),g!=null&&n.push({watch:r,handler:(t,e)=>{e!=null&&t.setOpacity(e)}}),h!=null&&n.push({watch:c,handler:(t,e)=>{e!=null&&t.setZIndexOffset(e)}}),s!=null&&n.push({watch:u,handler:(t,e)=>{var L,m;e?(L=t.dragging)==null||L.enable():(m=t.dragging)==null||m.disable()}}),n}return s!=null&&E(i,"moveend",()=>{!M(a)&&f(i)&&(a.value=i.value.getLatLng().clone())}),i}export{U as u};
