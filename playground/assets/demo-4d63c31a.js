import{t as L,w as C,f as D,n as M,i as s,g as S,u as $,d as N,l as O}from"./index-64b859a0.js";import{u as R}from"./index-d0c4de36.js";import{u as T}from"./index-5164b12f.js";import{u as _}from"./index-e04a8cbe.js";import{i as I,y as U,h as z,A as b,d as j,o as q,c as w}from"./index-c10dbf00.js";import{u as F}from"./index-5fb8de26.js";function k(x,f,u={}){const{zIndex:i,flushSync:p,dispose:m}=u,a=L(x),t=L(f),c=L(i),d=I({}),A=p?"sync":void 0,E=U(()=>h(t.value??[]).map(e=>d.value[e]));function g(){s(a)&&s(t)&&(v(a.value,t.value),l())}function v(e,n){h(n).forEach(r=>{if(!e.getPane(r)){const o=e.createPane(r);s(c)&&(o.style.zIndex=`${c.value}`)}})}function y(e,n){const r=e.getPanes();h(n).forEach(o=>{r[o]&&(r[o].remove(),delete r[o])})}function l(){s(a)&&(d.value={...a.value.getPanes()})}function P(e,n){return e.filter(r=>!n.includes(r))}function h(e){return Array.isArray(e)?e:[e]}z(()=>{if(s(t))return Array.isArray(t.value)?[...t.value]:[t.value]},(e,n)=>{s(a)&&(n&&e?(y(a.value,P(n,e)),v(a.value,P(e,n)),l()):n?(y(a.value,n),l()):e&&(v(a.value,e),l()))},{deep:!0,flush:A}),C(D(a,t),()=>{g()},{flush:A}),M(i)&&z(c,e=>{E.value.forEach(n=>{n.style.zIndex=`${e??""}`})});function B(){s(a)&&s(t)&&(y(a.value,t.value),l())}return m&&S(()=>{B()}),g(),{currentPanes:E,paneElements:b(d)}}const W=j({__name:"demo",setup(x){const f=I(null),u=$(f),i=R("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png");_(u,i);const{paneElements:p}=k(u,"paneA",{zIndex:800});k(u,"paneB",{zIndex:900,flushSync:!0});const m=T([0,0],{pane:"paneA"}),a=N(()=>new O.CircleMarker([0,0],{radius:20,pane:"paneB",fillColor:"#000"}));return _(u,F(m,()=>p.value.paneA)),_(u,a),(t,c)=>(q(),w("div",{ref_key:"el",ref:f,style:{height:"25rem"}},null,512))}});export{W as default};
