import{t as L,w as C,a as D,n as M,b as S,i as s,u as $,g as b,l as N}from"./index-ed878e1d.js";import{u as O}from"./index-1b1b50d5.js";import{u as R}from"./index-8d33dd4a.js";import{u as _}from"./index-1733bd9d.js";import{i as I,n as T,h as z,p as U,d as j,o as q,c as w}from"./index-874b5c23.js";import{u as F}from"./index-251b73ee.js";function k(x,f,u={}){const{zIndex:i,flushSync:p,dispose:m}=u,a=L(x),t=L(f),c=L(i),v=I({}),A=p?"sync":void 0,E=T(()=>h(t.value??[]).map(e=>v.value[e]));function g(){s(a)&&s(t)&&(d(a.value,t.value),l())}function d(e,n){h(n).forEach(r=>{if(!e.getPane(r)){const o=e.createPane(r);s(c)&&(o.style.zIndex=`${c.value}`)}})}function y(e,n){const r=e.getPanes();h(n).forEach(o=>{r[o]&&(r[o].remove(),delete r[o])})}function l(){s(a)&&(v.value={...a.value.getPanes()})}function P(e,n){return e.filter(r=>!n.includes(r))}function h(e){return Array.isArray(e)?e:[e]}z(()=>{if(s(t))return Array.isArray(t.value)?[...t.value]:[t.value]},(e,n)=>{s(a)&&(n&&e?(y(a.value,P(n,e)),d(a.value,P(e,n)),l()):n?(y(a.value,n),l()):e&&(d(a.value,e),l()))},{deep:!0,flush:A}),C(D(a,t),()=>{g()},{flush:A}),M(i)&&z(c,e=>{E.value.forEach(n=>{n.style.zIndex=`${e??""}`})});function B(){s(a)&&s(t)&&(y(a.value,t.value),l())}return m&&S(()=>{B()}),g(),{currentPanes:E,paneElements:U(v)}}const W=j({__name:"demo",setup(x){const f=I(null),u=$(f),i=O("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png");_(u,i);const{paneElements:p}=k(u,"paneA",{zIndex:800});k(u,"paneB",{zIndex:900,flushSync:!0});const m=R([0,0],{pane:"paneA"}),a=b(()=>new N.CircleMarker([0,0],{radius:20,pane:"paneB",fillColor:"#000"}));return _(u,F(m,()=>p.value.paneA)),_(u,a),(t,c)=>(q(),w("div",{ref_key:"el",ref:f,style:{height:"25rem"}},null,512))}});export{W as default};
