import{t as p,l as B,n as r,b as X,i as g,u as Y}from"./index-92163fe9.js";import{u as Z}from"./index-a5924611.js";import{u as j}from"./index-72f16a81.js";import{s as tt,i as q,l as $,h as z,m as ot,d as et,o as it,c as nt,a,u as b,f as st,t as lt,F as at}from"./index-fb696e2b.js";import{u as A}from"./index-5580f852.js";function ut(E,f,T={}){const{offset:_,direction:c,opacity:d,className:m,visible:y=!1,autoBind:M=!0,defOptions:s,updateSources:n=[],dispose:G=!0,...H}=T,k=tt(null),i=p(E),R=q(f),v=p(y),w=p(_),L=p(c),N=p(d),O=p(m),u=s??B.Tooltip.prototype.options,I={get value(){return k.value},set value(t){t||x()}};n.push({watch:v,handler:(t,o)=>{o?C():S()}}),r(_)&&n.push({watch:w,handler:(t,o)=>{const e=t.getTooltip();e&&(e.options.offset=$(o)??u.offset,e.update())}}),r(c)&&n.push({watch:L,handler:(t,o)=>{const e=t.getTooltip();e&&(e.options.direction=o??u.direction,e.update())}}),r(d)&&n.push({watch:N,handler:(t,o)=>{const e=t.getTooltip();e&&e.setOpacity(o??u.opacity)}}),r(f)&&n.push({watch:R,handler:(t,o)=>{t.setTooltipContent(o??u.content)}}),r(m)&&n.push({watch:O,handler:(t,o,e)=>{const l=t.getTooltip();if(!l)return;l.options.className=o??u.className;const h=l.getElement();h&&(e&&h.classList.remove(...B.Util.splitWords(e)),l.options.className&&h.classList.add(...B.Util.splitWords(l.options.className)))}});function U(){if(!g(i))return;i.value.bindTooltip(R.value??u.content,P()).on("add",W).on("tooltipopen",F).on("tooltipclose",V);const t=i.value.getTooltip();t&&(k.value=ot(t))}function x(){D(i.value)}function D(t){r(t)&&t.unbindTooltip().off("add",W).off("tooltipopen",F).off("tooltipclose",V),k.value=null}function C(t){var o;(o=i.value)==null||o.openTooltip(t)}function S(){var t;(t=i.value)==null||t.closeTooltip()}function J(){var t;(t=i.value)!=null&&t._map&&i.value.toggleTooltip()}function K(){var t;return(t=i.value)!=null&&t.getTooltip()?i.value.isTooltipOpen():!1}function F(){v.value=!0}function V(){v.value=!1}function W(){v.value&&C()}function P(){const t={...H};return g(w)&&(t.offset=$(w.value)),g(L)&&(t.direction=L.value),g(N)&&(t.opacity=N.value),g(O)&&(t.className=O.value),t}function Q(t){const{handler:o,options:e}=t;z(t.watch,(l,h)=>{i.value&&o(i.value,l,h)},{...e})}return M&&z(i,(t,o)=>{o&&D(o),t&&U()},{immediate:!0}),n.forEach(Q),G&&X(()=>{x()}),{visible:v,tooltip:I,bind:U,unbind:x,open:C,close:S,toggle:J,isOpened:K}}const pt=a("br",null,null,-1),rt=a("br",null,null,-1),ft=a("br",null,null,-1),gt=et({__name:"demo",setup(E){const f=q(null),T=Y(f),_=Z("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png");A(T,_);const c=j([0,0]),{visible:d,toggle:m}=ut(c,"Text",{visible:!0}),y=A(T,c);return(M,s)=>(it(),nt(at,null,[a("div",{ref_key:"el",ref:f,style:{height:"19rem"}},null,512),pt,a("button",{onClick:s[0]||(s[0]=(...n)=>b(m)&&b(m)(...n))},"Toggle Tooltip"),st(" Visible: "+lt(b(d))+" ",1),rt,a("button",{onClick:s[1]||(s[1]=n=>b(y)())},"Toggle Marker"),ft,a("button",{onClick:s[2]||(s[2]=n=>d.value=!0)},"Set Visible")],64))}});export{gt as default};
