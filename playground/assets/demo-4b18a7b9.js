import{t as i,l as U,n as u,b as st,i as l,u as lt}from"./index-79c7f9fe.js";import{u as ft}from"./index-162295aa.js";import{u as dt}from"./index-8772baa2.js";import{s as rt,i as X,l as _,h as K,m as ct,d as ht,o as mt,c as Pt,a as d,u as x,f as gt,t as vt,F as _t}from"./index-ce93c87f.js";import{u as Q}from"./index-b5257f27.js";function wt(D,c,w={}){const{offset:b,maxWidth:h,minWidth:m,maxHeight:P,keepInView:k,autoPan:L,autoPanPaddingTopLeft:f,autoPanPaddingBottomRight:r,autoPanPadding:S,className:F,visible:Y=!1,autoBind:Z=!0,defOptions:tt,updateSources:n=[],dispose:ot=!0,...et}=w,W=rt(null),a=i(D),$=X(c),g=i(Y),y=i(b),N=i(h),T=i(m),B=i(P),R=i(k),O=i(L),V=i(f),C=i(r),I=i(S),H=i(F),p=tt??U.Popup.prototype.options,nt={get value(){return W.value},set value(t){t||E()}};n.push({watch:g,handler:(t,e)=>{e?M():A()}}),u(b)&&n.push({watch:y,handler:(t,e)=>{const o=t.getPopup();o&&(o.options.offset=_(e)??p.offset,o.update())}}),u(h)&&n.push({watch:N,handler:(t,e)=>{const o=t.getPopup();o&&(o.options.maxWidth=e??p.maxWidth,o.update())}}),u(m)&&n.push({watch:T,handler:(t,e)=>{const o=t.getPopup();o&&(o.options.minWidth=e??p.minWidth,o.update())}}),u(P)&&n.push({watch:B,handler:(t,e)=>{const o=t.getPopup();o&&(o.options.maxHeight=e??p.maxHeight,o.update())}}),u(L)&&n.push({watch:O,handler:(t,e)=>{const o=t.getPopup();o&&(o.options.autoPan=e??p.autoPan)}}),u(f)&&n.push({watch:V,handler:(t,e)=>{const o=t.getPopup();o&&(o.options.autoPanPaddingTopLeft=_(e)??p.autoPanPaddingTopLeft)}}),u(r)&&n.push({watch:C,handler:(t,e)=>{const o=t.getPopup();o&&(o.options.autoPanPaddingBottomRight=_(e)??p.autoPanPaddingBottomRight)}}),u(S)&&n.push({watch:I,handler:(t,e)=>{const o=t.getPopup();o&&(o.options.autoPanPadding=_(e)??p.autoPanPadding)}}),u(c)&&n.push({watch:$,handler:(t,e)=>{t.setPopupContent(e??p.content)}}),u(F)&&n.push({watch:H,handler:(t,e,o)=>{const s=t.getPopup();if(!s)return;s.options.className=e??p.className;const v=s.getElement();v&&(o&&v.classList.remove(...U.Util.splitWords(o)),s.options.className&&v.classList.add(...U.Util.splitWords(s.options.className)))}}),u(k)&&n.push({watch:R,handler:(t,e)=>{const o=t.getPopup();if(!o)return;o.options.keepInView=e??p.keepInView;const s=t._map;s&&(s.off("moveend",t._adjustPan),o.options.keepInView&&s.on("moveend",t._adjustPan))}});function j(){if(!l(a))return;a.value.bindPopup($.value??p.content,it()).on("add",J).on("popupopen",q).on("popupclose",G);const t=a.value.getPopup();t&&(W.value=ct(t))}function E(){z(a.value)}function z(t){u(t)&&t.unbindPopup().off("add",J).off("popupopen",q).off("popupclose",G),W.value=null}function M(t){var e;(e=a.value)==null||e.openPopup(t)}function A(){var t;(t=a.value)==null||t.closePopup()}function at(){var t;(t=a.value)!=null&&t._map&&a.value.togglePopup()}function pt(){var t;return((t=a.value)==null?void 0:t.isPopupOpen())??!1}function q(){g.value=!0}function G(){g.value=!1}function J(){g.value&&M()}function it(){const t={...et};return l(y)&&(t.offset=_(y.value)),l(N)&&(t.maxWidth=N.value),l(T)&&(t.minWidth=T.value),l(B)&&(t.maxHeight=B.value),l(R)&&(t.keepInView=R.value),l(O)&&(t.autoPan=O.value),l(V)&&(t.autoPanPaddingTopLeft=V.value),l(C)&&(t.autoPanPaddingBottomRight=C.value),l(I)&&(t.autoPanPadding=I.value),l(H)&&(t.className=H.value),t}function ut(t){const{handler:e,options:o}=t;K(t.watch,(s,v)=>{a.value&&e(a.value,s,v)},{...o})}return Z&&K(a,(t,e)=>{e&&z(e),t&&j()},{immediate:!0}),n.forEach(ut),ot&&st(()=>{E()}),{visible:g,popup:nt,bind:j,unbind:E,open:M,close:A,toggle:at,isOpened:pt}}const bt=d("br",null,null,-1),kt=d("br",null,null,-1),xt=d("br",null,null,-1),Bt=ht({__name:"demo",setup(D){const c=X(null),w=lt(c),b=ft("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png");Q(w,b);const h=dt([0,0]),{visible:m,toggle:P}=wt(h,"Text",{visible:!0}),k=Q(w,h);return(L,f)=>(mt(),Pt(_t,null,[d("div",{ref_key:"el",ref:c,style:{height:"19rem"}},null,512),bt,d("button",{onClick:f[0]||(f[0]=(...r)=>x(P)&&x(P)(...r))},"Toggle Popup"),gt(" Visible: "+vt(x(m))+" ",1),kt,d("button",{onClick:f[1]||(f[1]=r=>x(k)())},"Toggle Marker"),xt,d("button",{onClick:f[2]||(f[2]=r=>m.value=!0)},"Set Visible")],64))}});export{Bt as default};
