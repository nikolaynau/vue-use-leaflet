import{h as S,u as O,C as G,q as M,D as U,i as w,E as Z,G as $,y as F,H,I as J,J as K,s as z,l as C,m as j,K as N,p as P}from"./index-sEMHmT-4.js";function Q(t){return H()?(J(t),!0):!1}function L(t){return O(t)!=null}function a(t){return typeof t=="function"?t():O(t)}const X=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const re=t=>t!=null,Y=Object.prototype.toString,V=t=>Y.call(t)==="[object Object]",A=()=>{};function T(...t){if(t.length!==1)return G(...t);const o=t[0];return typeof o=="function"?M(U(()=>({get:o,set:A}))):w(o)}function k(t){Z()&&$(t)}function ee(t=!1,o={}){const{truthyValue:s=!0,falsyValue:f=!1}=o,i=F(t),n=w(t);function p(v){if(arguments.length)return n.value=v,n.value;{const c=a(s);return n.value=n.value===c?a(f):c,n.value}}return i?p:[n,p]}function B(t,o,s){return S(t,(f,i,n)=>{f&&o(f,i,n)},s)}function D(t){var o;const s=a(t);return(o=s==null?void 0:s.$el)!=null?o:s}const te=X?window:void 0;function ne(...t){let o,s,f,i;if(typeof t[0]=="string"||Array.isArray(t[0])?([s,f,i]=t,o=te):[o,s,f,i]=t,!o)return A;Array.isArray(s)||(s=[s]),Array.isArray(f)||(f=[f]);const n=[],p=()=>{n.forEach(d=>d()),n.length=0},v=(d,u,m,g)=>(d.addEventListener(u,m,g),()=>d.removeEventListener(u,m,g)),c=S(()=>[D(o),a(i)],([d,u])=>{if(p(),!d)return;const m=V(u)?{...u}:u;n.push(...s.flatMap(g=>f.map(r=>v(d,g,r,m))))},{immediate:!0,flush:"post"}),y=()=>{c(),p()};return Q(y),y}function se(t,o,s){return ne(t,o,s,void 0)}function oe(t,o={}){const{remove:s,isRemoved:f,watch:i,cleanRef:n,cleanVal:p=null,flushSync:v,dispose:c}=o,y=T(t),d=v?"sync":void 0;let u=!1;S(y,(r,h)=>{u?u=!1:!r&&h&&m(h)},{flush:d}),i&&B(i,()=>{g()},{flush:d});function m(r){!((f==null?void 0:f(r))??!1)&&(s==null||s(r))}function g(){L(y)&&(m(y.value),n&&!K(y)&&(u=!0,y.value=p))}return c&&k(()=>{g()}),g}function I(t,o={}){const{remove:s=c=>c.off().remove(),isRemoved:f=c=>!c._map,cleanRef:i=!0,flushSync:n=!0,dispose:p=!0,...v}=o;return oe(t,{remove:s,isRemoved:f,cleanRef:i,flushSync:n,dispose:p,...v})}function le(t,o={}){const{center:s=[0,0],zoom:f=0,bounds:i,useFly:n=!1,flushSync:p,factory:v,dispose:c=!0,onViewChanged:y,...d}=o,u=z(null);function m(e){const l={...d},_=a(i)||a(n);_||(l.center=a(s),l.zoom=a(f));const R=typeof v=="function"?v(e,l):new C.Map(e,l);_&&r(R),u.value=j(R)}function g(e){return e.setView([0,0],0)}function r(e){a(i)?a(n)?g(e).flyToBounds(a(i)):e.fitBounds(a(i)):a(n)&&g(e).flyTo(a(s),a(f))}function h(e){var l,_;e=C.latLngBounds(e),e.isValid()&&(a(n)?(l=u.value)==null||l.flyToBounds(e):(_=u.value)==null||_.fitBounds(e))}function b(e,l){var _,R;a(n)?(_=u.value)==null||_.flyTo(e,l):(R=u.value)==null||R.setView(e,l)}function W(e){var l,_;a(n)?(l=u.value)==null||l.flyTo(e):(_=u.value)==null||_.panTo(e)}function q(e){var l,_,R;a(n)?(_=u.value)==null||_.flyTo((l=u.value)==null?void 0:l.getCenter(),e):(R=u.value)==null||R.setZoom(e)}function E(e,l){return e===l?!0:!L(e)||!L(l)?!1:C.latLng(e).equals(C.latLng(l))}const x=I(u,{isRemoved:e=>!e.getContainer()._leaflet_id,dispose:c});return S(()=>a(i),e=>{e&&h(e)}),S(()=>({center:a(s),zoom:a(f)}),(e,l)=>{!E(e.center,l.center)&&e.zoom!==l.zoom?L(e.center)&&b(e.center,e.zoom):E(e.center,l.center)?e.zoom!==l.zoom&&L(e.zoom)&&q(e.zoom):L(e.center)&&W(e.center)}),S(()=>D(t),e=>{x(),e&&m(e)},{immediate:!0,flush:p?"sync":"post"}),y&&se(u,"moveend",e=>{const l=e.sourceTarget;y({center:l.getCenter(),zoom:l.getZoom(),bounds:l.getBounds(),...e})}),u}function ue(t,o={}){const{watch:s,flushSync:f}=o,i=z(null),n=f?"sync":void 0;function p(){i.value=j(t())}if(s){const v=T(s);if(v.value)p();else{const c=S(v,y=>{y&&(N(()=>c()),p())},{flush:n})}}else p();return i}function ae(t,o={}){const{watch:s,flushSync:f,updateSources:i,remove:n,dispose:p}=o,v=ue(t,{watch:s,flushSync:f}),c=f?"sync":void 0;Array.isArray(i)&&i.forEach(y);function y(d){const{handler:u,options:m}=d;S(d.watch,(g,r)=>{v.value&&u(v.value,g,r)},{flush:c,...m})}return I(v,{remove:n,dispose:p}),v}function fe(...t){return P(()=>t.every(o=>a(o)))}function ie(t,o,s={}){const{initialValue:f=!0,controls:i=!1,flushSync:n=!1,dispose:p=!1,onToggle:v}=s,c=T(f),y=ee(c),d=n?"sync":void 0;function u(g){const r=a(t),h=a(o);r&&h&&(v==null||v(r,h,g))}function m(){O(c)&&u(O(c))}return S(c,u,{flush:d}),B(fe(t,o),()=>{m()},{flush:d}),p&&k(()=>{u(!1)}),m(),i?{toggle:y,value:c}:y}function ve(t,o,s={}){const{show:f,hide:i,shown:n,flushSync:p,...v}=s,c=T(t),y=T(o),d=p?"sync":void 0,u=ie(t,o,{...v,flushSync:p,onToggle:m});function m(r,h,b){b?!((n==null?void 0:n(r,h))??!1)&&(f==null||f(r,h)):((n==null?void 0:n(r,h))??!0)&&(i==null||i(r,h))}function g(){return!!(c.value&&y.value&&(n!=null&&n(c.value,y.value)))}if(S(y,(r,h)=>{c.value&&(!r&&h?m(c.value,h,!1):r&&!h?m(c.value,r,!0):r&&h&&r!==h&&(m(c.value,h,!1),m(c.value,r,!0)))},{flush:d}),s.controls){const{toggle:r,value:h}=u;return{toggle:r,value:h,show:()=>{r(!0)},hide:()=>{r(!1)},shown:g}}return u}export{k as a,a as b,ue as c,ve as d,se as e,ae as f,oe as g,I as h,L as i,ie as j,fe as l,re as n,T as t,le as u,B as w};
