import{t as i,l as m,n as o,d as z,i as r,c as M}from"./index-2613aac8.js";import{I as E}from"./index-6f81ce6d.js";function D(w,x={}){const{icon:h,opacity:b,zIndexOffset:v,draggable:l,factory:y,dispose:I,updateSources:t=[],..._}=x,n=i(w),d=i(h),u=i(b),p=i(v),g=i(l),f=m.Marker.prototype.options;t.push({watch:n,handler:(e,a)=>{o(a)&&e.setLatLng(a)}}),o(h)&&t.push({watch:d,handler:(e,a)=>{e.setIcon(a??f.icon)}}),o(b)&&t.push({watch:u,handler:(e,a)=>{e.setOpacity(a??f.opacity)}}),o(v)&&t.push({watch:p,handler:(e,a)=>{e.setZIndexOffset(a??f.zIndexOffset)}}),o(l)&&t.push({watch:g,handler:(e,a)=>{const{dragging:s,options:L}=e;L.draggable=a??f.draggable,L.draggable?s&&!s.enabled()&&s.enable():s&&s.enabled()&&s.disable()}});const c=z(k,{watch:n,updateSources:t,dispose:I});function k(){return y?y(n.value,O()):new m.Marker(n.value,O())}function O(){const e={..._};return r(d)&&(e.icon=d.value),r(u)&&(e.opacity=u.value),r(p)&&(e.zIndexOffset=p.value),r(g)&&(e.draggable=g.value),e}return o(l)&&M(c,"moveend",()=>{!E(n)&&r(c)&&(n.value=c.value.getLatLng().clone())}),c}export{D as u};
