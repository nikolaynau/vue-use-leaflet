import{t as u,l as B,n as p,i as h,g as X,u as Y}from"./index-1d484b1b.js";import{u as Z}from"./index-fc816339.js";import{u as j}from"./index-ab7ef647.js";import{s as tt,i as q,l as $,h as z,m as ot,d as et,o as it,c as nt,a as l,u as b,f as st,t as lt,F as at}from"./index-ce8cab1b.js";import{u as A}from"./index-6f813d11.js";function ut(E,f,T={}){const{offset:_,direction:r,opacity:c,className:d,defOptions:y,visible:M=!1,updateSources:i=[],autoBind:m=!0,dispose:G=!0,...H}=T,k=tt(null),n=u(E),R=q(f),v=u(M),w=u(_),L=u(r),N=u(c),O=u(d),a=y??B.Tooltip.prototype.options,I={get value(){return k.value},set value(t){t||x()}};i.push({watch:v,handler:(t,o)=>{o?C():S()}}),p(_)&&i.push({watch:w,handler:(t,o)=>{const e=t.getTooltip();e&&(e.options.offset=$(o)??a.offset,e.update())}}),p(r)&&i.push({watch:L,handler:(t,o)=>{const e=t.getTooltip();e&&(e.options.direction=o??a.direction,e.update())}}),p(c)&&i.push({watch:N,handler:(t,o)=>{const e=t.getTooltip();e&&e.setOpacity(o??a.opacity)}}),p(f)&&i.push({watch:R,handler:(t,o)=>{t.setTooltipContent(o??a.content)}}),p(d)&&i.push({watch:O,handler:(t,o,e)=>{const s=t.getTooltip();if(!s)return;s.options.className=o??a.className;const g=s.getElement();g&&(e&&g.classList.remove(...B.Util.splitWords(e)),s.options.className&&g.classList.add(...B.Util.splitWords(s.options.className)))}});function U(){if(h(n)){n.value.bindTooltip(R.value??a.content,P()).on("add",W).on("tooltipopen",F).on("tooltipclose",V);const t=n.value.getTooltip();t&&(k.value=ot(t))}}function x(){D(n.value)}function D(t){p(t)&&t.unbindTooltip().off("add",W).off("tooltipopen",F).off("tooltipclose",V),k.value=null}function C(t){var o;(o=n.value)==null||o.openTooltip(t)}function S(){var t;(t=n.value)==null||t.closeTooltip()}function J(){var t;(t=n.value)!=null&&t._map&&n.value.toggleTooltip()}function K(){var t;return(t=n.value)!=null&&t.getTooltip()?n.value.isTooltipOpen():!1}function F(){v.value=!0}function V(){v.value=!1}function W(){v.value&&C()}function P(){const t={...H};return h(w)&&(t.offset=$(w.value)),h(L)&&(t.direction=L.value),h(N)&&(t.opacity=N.value),h(O)&&(t.className=O.value),t}function Q(t){const{handler:o,options:e}=t;z(t.watch,(s,g)=>{n.value&&o(n.value,s,g)},{...e})}return m&&z(n,(t,o)=>{o&&D(o),t&&U()},{immediate:!0}),i.forEach(Q),G&&X(()=>{x()}),{visible:v,tooltip:I,bind:U,unbind:x,open:C,close:S,toggle:J,isOpened:K}}const pt=l("br",null,null,-1),ft=l("br",null,null,-1),rt=l("br",null,null,-1),ht=et({__name:"demo",setup(E){const f=q(null),T=Y(f),_=Z("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png");A(T,_);const r=j([0,0]),{visible:c,toggle:d}=ut(r,"Text",{visible:!0}),y=A(T,r);return(M,i)=>(it(),nt(at,null,[l("div",{ref_key:"el",ref:f,style:{height:"19rem"}},null,512),pt,l("button",{onClick:i[0]||(i[0]=(...m)=>b(d)&&b(d)(...m))},"Toggle Tooltip"),st(" Visible: "+lt(b(c))+" ",1),ft,l("button",{onClick:i[1]||(i[1]=m=>b(y)())},"Toggle Marker"),rt,l("button",{onClick:i[2]||(i[2]=m=>c.value=!0)},"Set Visible")],64))}});export{ht as default};
