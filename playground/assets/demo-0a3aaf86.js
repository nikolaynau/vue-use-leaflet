import{t as x,w as I,g as C,i as s,h as D,u as M,a as S,b as E,l as k}from"./index-224bd8b6.js";import{u as v}from"./index-cb9b28ce.js";import{i as z,h as b,B as w,d as O,o as R,c as T}from"./index-d1d159a6.js";import{u as U}from"./index-0df6ab4d.js";function P(h,o,l={}){const{zIndex:f,flushSync:c,dispose:p}=l,a=x(h),t=x(o),m=z({}),L=c?"sync":void 0;function A(){s(a)&&s(t)&&(y(a.value,t.value),u())}function y(e,n){_(n).forEach(r=>{if(!e.getPane(r)){const i=e.createPane(r);s(f)&&(i.style.zIndex=`${f}`)}})}function d(e,n){const r=e.getPanes();_(n).forEach(i=>{r[i]&&(r[i].remove(),delete r[i])})}function _(e){return Array.isArray(e)?e:[e]}function u(){s(a)&&(m.value={...a.value.getPanes()})}function g(e,n){return e.filter(r=>!n.includes(r))}b(()=>{if(s(t))return Array.isArray(t.value)?[...t.value]:[t.value]},(e,n)=>{s(a)&&(n&&e?(d(a.value,g(n,e)),y(a.value,g(e,n)),u()):n?(d(a.value,n),u()):e&&(y(a.value,e),u()))},{deep:!0,flush:L}),I(C(a,t),()=>{A()},{flush:L});function B(){s(a)&&s(t)&&(d(a.value,t.value),u())}return p&&D(()=>{B()}),A(),{paneElements:w(m)}}const G=O({__name:"demo",setup(h){const o=z(null),l=M(o),f=S("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png");v(l,f);const{paneElements:c}=P(l,"paneA",{zIndex:800});P(l,"paneB",{zIndex:900,flushSync:!0});const p=E(()=>new k.Marker([0,0],{pane:"paneA"})),a=E(()=>new k.CircleMarker([0,0],{radius:20,pane:"paneB",fillColor:"#000"}));return v(l,U(p,()=>c.value.paneA)),v(l,a),(t,m)=>(R(),T("div",{ref_key:"el",ref:o,style:{height:"25rem"}},null,512))}});export{G as default};
