import{l as y,t as i,e as D,i as a,d as E}from"./index-ad17f05d.js";import{B as M}from"./index-e01de63b.js";function U(O,v={}){const{icon:d,opacity:g,zIndexOffset:h,draggable:o,factory:p,dispose:x,updateSources:_=[],defIcon:w=new y.Icon.Default,...b}=v,f=i(O),l=i(d),r=i(g),c=i(h),u=i(o),s=D(k,{watch:f,updateSources:z(_),dispose:x});function k(){return p?p(f.value,I()):new y.Marker(f.value,I())}function I(){const t={...b};return a(l)&&(t.icon=l.value),a(r)&&(t.opacity=r.value),a(c)&&(t.zIndexOffset=c.value),a(u)&&(t.draggable=u.value),t}function z(t){return t.push({watch:f,handler:(n,e)=>{e!=null&&n.setLatLng(e)}}),a(d)&&t.push({watch:l,handler:(n,e)=>{e?n.setIcon(e):w&&n.setIcon(w)}}),a(g)&&t.push({watch:r,handler:(n,e)=>{e!=null&&n.setOpacity(e)}}),a(h)&&t.push({watch:c,handler:(n,e)=>{e!=null&&n.setZIndexOffset(e)}}),a(o)&&t.push({watch:u,handler:(n,e)=>{var L,m;e?(L=n.dragging)==null||L.enable():(m=n.dragging)==null||m.disable()}}),t}return a(o)&&E(s,"moveend",()=>{!M(f)&&a(s)&&(f.value=s.value.getLatLng().clone())}),s}export{U as u};
