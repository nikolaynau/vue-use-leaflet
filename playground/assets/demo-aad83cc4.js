import{t as L,w as C,g as D,i as r,h as M,u as S,a as $,e as O,l as R}from"./index-8c4855d2.js";import{u as T}from"./index-c47cf2e0.js";import{u as _}from"./index-fc1a159e.js";import{i as I,y as U,h as z,A as b,d as j,o as q,c as w}from"./index-668797d6.js";import{u as F}from"./index-c6ab9522.js";function k(x,f,l={}){const{zIndex:i,flushSync:p,dispose:m}=l,a=L(x),t=L(f),c=L(i),v=I({}),A=p?"sync":void 0,E=U(()=>h(r(t)?t.value:[]).map(e=>v.value[e]));function g(){r(a)&&r(t)&&(d(a.value,t.value),u())}function d(e,n){h(n).forEach(s=>{if(!e.getPane(s)){const o=e.createPane(s);r(c)&&(o.style.zIndex=`${c.value}`)}})}function y(e,n){const s=e.getPanes();h(n).forEach(o=>{s[o]&&(s[o].remove(),delete s[o])})}function h(e){return Array.isArray(e)?e:[e]}function u(){r(a)&&(v.value={...a.value.getPanes()})}function P(e,n){return e.filter(s=>!n.includes(s))}z(()=>{if(r(t))return Array.isArray(t.value)?[...t.value]:[t.value]},(e,n)=>{r(a)&&(n&&e?(y(a.value,P(n,e)),d(a.value,P(e,n)),u()):n?(y(a.value,n),u()):e&&(d(a.value,e),u()))},{deep:!0,flush:A}),C(D(a,t),()=>{g()},{flush:A}),i!=null&&z(c,e=>{E.value.forEach(n=>{n.style.zIndex=`${e??""}`})});function B(){r(a)&&r(t)&&(y(a.value,t.value),u())}return m&&M(()=>{B()}),g(),{currentPanes:E,paneElements:b(v)}}const Q=j({__name:"demo",setup(x){const f=I(null),l=S(f),i=$("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png");_(l,i);const{paneElements:p}=k(l,"paneA",{zIndex:800});k(l,"paneB",{zIndex:900,flushSync:!0});const m=T([0,0],{pane:"paneA"}),a=O(()=>new R.CircleMarker([0,0],{radius:20,pane:"paneB",fillColor:"#000"}));return _(l,F(m,()=>p.value.paneA)),_(l,a),(t,c)=>(q(),w("div",{ref_key:"el",ref:f,style:{height:"25rem"}},null,512))}});export{Q as default};
