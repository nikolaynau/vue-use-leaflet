import{n as b,e as x,d as M,l as k,u as D}from"./index-0d70a01e.js";import{u as G}from"./index-cd2b56ea.js";import{h as S,y as w,d as E,i as N,r as O,o as T,c as U,a as _,u as z,F as $}from"./index-55db8e24.js";import{u as A}from"./index-f6889cab.js";import{u as C}from"./index-42049e6c.js";function j(g,f,u={}){const{enabled:d=!0,diffFn:m,update:i,add:o,remove:s,watchOptions:c}=u,l=S(()=>[...x(g)],(t,n)=>{if(d)if(b(n)){const{add:h,remove:v}=(m??y)(t,n);s==null||s(v),o==null||o(h)}else o==null||o(t);else i==null||i(t,n)},{deep:!0,...c});function y(t,n){return{add:L(t,n,f),remove:L(n,t,f)}}function L(t,n,h){return t.filter(v=>!n.some(e=>h(v,e)))}return l}function q(g,f={}){const{diff:u,compareFn:d,factory:m,updateSources:i,dispose:o,...s}=f,c=w(()=>{const e=x(g);if(!b(e))return[];const r=v(e),a=[];for(let p=0,F=r.length;p<F;p++){const B=x(r[p]);b(B)&&a.push(B)}return a}),l=M(y,{updateSources:i,dispose:o});j(c,d??h,{enabled:u!==!1,diffFn:typeof u=="function"?u:void 0,update:L,add:t,remove:n});function y(){return m?m(c.value,s):new k.LayerGroup(c.value,s)}function L(e){var r;(r=l.value)==null||r.clearLayers(),t(e)}function t(e){var r;for(let a=0,p=e.length;a<p;a++)(r=l.value)==null||r.addLayer(e[a])}function n(e){var r;for(let a=0,p=e.length;a<p;a++)(r=l.value)==null||r.removeLayer(e[a])}function h(e,r){return k.Util.stamp(e)===k.Util.stamp(r)}function v(e){return Array.isArray(e)?e:[e]}return l}const H=_("br",null,null,-1),I=_("br",null,null,-1),W=E({__name:"demo",setup(g){const f=N(null),u=D(f),d=G("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png");C(u,d);const m=A([0,0]),i=A([-20,-20]),o=A([-40,-40]),s=O([m,i]),c=q(s),l=C(u,c);function y(){s.push(o)}return(L,t)=>(T(),U($,null,[_("div",{ref_key:"el",ref:f,style:{height:"20rem"}},null,512),H,_("button",{onClick:y},"Add Marker"),I,_("button",{onClick:t[0]||(t[0]=n=>z(l)())},"Toggle Show")],64))}});export{W as default};
