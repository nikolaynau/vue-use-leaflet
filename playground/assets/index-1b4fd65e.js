import{l as O,t as f,d as E,i,n,c as M}from"./index-432443ae.js";import{B as R}from"./index-d33f0b91.js";function U(v,x={}){const{icon:h,opacity:g,zIndexOffset:p,draggable:r,factory:w,dispose:_,updateSources:b=[],defIcon:I=new O.Icon.Default,...k}=x,s=f(v),c=f(h),l=f(g),d=f(p),u=f(r),o=E(z,{watch:s,updateSources:D(b),dispose:_});function z(){return w?w(s.value,L()):new O.Marker(s.value,L())}function L(){const t={...k};return i(c)&&(t.icon=c.value),i(l)&&(t.opacity=l.value),i(d)&&(t.zIndexOffset=d.value),i(u)&&(t.draggable=u.value),t}function D(t){return t.push({watch:s,handler:(a,e)=>{n(e)&&a.setLatLng(e)}}),n(h)&&t.push({watch:c,handler:(a,e)=>{e?a.setIcon(e):I&&a.setIcon(I)}}),n(g)&&t.push({watch:l,handler:(a,e)=>{n(e)&&a.setOpacity(e)}}),n(p)&&t.push({watch:d,handler:(a,e)=>{n(e)&&a.setZIndexOffset(e)}}),n(r)&&t.push({watch:u,handler:(a,e)=>{var m,y;e?(m=a.dragging)==null||m.enable():(y=a.dragging)==null||y.disable()}}),t}return n(r)&&M(o,"moveend",()=>{!R(s)&&i(o)&&(s.value=o.value.getLatLng().clone())}),o}export{U as u};
