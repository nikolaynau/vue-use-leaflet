import{t as x,w as z,f as B,i as s,g as I,u as C,a as D,d as M,l as S}from"./index-4e39c2b1.js";import{u as O}from"./index-303962c1.js";import{u as v}from"./index-3b533d2e.js";import{i as k,h as R,A as T,d as U,o as $,c as b}from"./index-d1902126.js";import{u as j}from"./index-5198e256.js";function E(h,o,l={}){const{zIndex:i,flushSync:c,dispose:p}=l,a=x(h),t=x(o),m=k({}),L=c?"sync":void 0;function A(){s(a)&&s(t)&&(d(a.value,t.value),u())}function d(e,n){_(n).forEach(r=>{if(!e.getPane(r)){const f=e.createPane(r);s(i)&&(f.style.zIndex=`${i}`)}})}function y(e,n){const r=e.getPanes();_(n).forEach(f=>{r[f]&&(r[f].remove(),delete r[f])})}function _(e){return Array.isArray(e)?e:[e]}function u(){s(a)&&(m.value={...a.value.getPanes()})}function g(e,n){return e.filter(r=>!n.includes(r))}R(()=>{if(s(t))return Array.isArray(t.value)?[...t.value]:[t.value]},(e,n)=>{s(a)&&(n&&e?(y(a.value,g(n,e)),d(a.value,g(e,n)),u()):n?(y(a.value,n),u()):e&&(d(a.value,e),u()))},{deep:!0,flush:L}),z(B(a,t),()=>{A()},{flush:L});function P(){s(a)&&s(t)&&(y(a.value,t.value),u())}return p&&I(()=>{P()}),A(),{paneElements:T(m)}}const J=U({__name:"demo",setup(h){const o=k(null),l=C(o),i=D("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png");v(l,i);const{paneElements:c}=E(l,"paneA",{zIndex:800});E(l,"paneB",{zIndex:900,flushSync:!0});const p=O([0,0],{pane:"paneA"}),a=M(()=>new S.CircleMarker([0,0],{radius:20,pane:"paneB",fillColor:"#000"}));return v(l,j(p,()=>c.value.paneA)),v(l,a),(t,m)=>($(),b("div",{ref_key:"el",ref:o,style:{height:"25rem"}},null,512))}});export{J as default};
